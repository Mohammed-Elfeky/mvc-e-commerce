
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@model Product; 

<div class="">
    <main role="main" class="pb-3">

        <div class="container-fluid py-5">
            <div class="row  px-xl-5">

                <div class="col-lg-7 pb-5 text-center" style="height: 500px;" >
                    <img style="width:500px" src="/productImages/@Model.img" />
                </div>

                <div class="col-lg-5  align-self-center">
                    <h3 class="font-weight-semi-bold">@Model.Name</h3>
                    <div class="d-flex mb-3">
                        <div class="text-primary mr-2">
                            <small class="fas fa-star"></small>
                            <small class="fas fa-star"></small>
                            <small class="fas fa-star"></small>
                            <small class="fas fa-star-half-alt"></small>
                            <small class="far fa-star"></small>
                        </div>
                        <small class="pt-1">(50 Reviews)</small>
                    </div>
                    <h3 class="font-weight-semi-bold mb-4">@Model.Price</h3>
                    <p class="mb-4">
                        @Model.Description
                    </p>

                    <div class="d-flex align-items-center mb-4 pt-2">
                        <button onclick="whenAdd(@Model.Id)" class="btn btn-primary px-3"><i class="fa fa-shopping-cart mr-1"></i> Add To Cart</button>
                    </div>
                    <div class="d-flex pt-2">
                        <p class="text-dark font-weight-medium mb-0 mr-2">Share on:</p>
                        <div class="d-inline-flex">
                            <a class="text-dark px-2" href="">
                                <i class="fab fa-facebook-f"></i>
                            </a>
                            <a class="text-dark px-2" href="">
                                <i class="fab fa-twitter"></i>
                            </a>
                            <a class="text-dark px-2" href="">
                                <i class="fab fa-linkedin-in"></i>
                            </a>
                            <a class="text-dark px-2" href="">
                                <i class="fab fa-pinterest"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>

        </div>

    </main>
</div>




@section MyScript{
    <script>
        function whenAdd(productId){
                $.ajax({
                  url:"/Cart/Add/"+productId,
                  success: function(res){
                      updateCartCount(res.count)
                    },
                  error: function (request, status, error) {
                    //if not signed in user redirect him to login
                    if(request.status==401){
                       window.location.href = "/Account/Login";
                    }
                  }
                });
        }
       function updateCartCount(count){
            localStorage.setItem("count",count)
            document.dispatchEvent(new CustomEvent("countChange"))
        }
    </script>
}
				